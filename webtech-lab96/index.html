<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="design.css"> <!--- links html file to css file -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--- makes website responsive -->
    <title>Mobile Phone Web Shop</title>
    <link rel="icon" href="https://media.discordapp.net/attachments/887340040496238652/931255515923771392/logo.png">
  </head>
  <body>
    <script>
    function sortTable(n){
      var table, rows, switching, el1, el2, shouldSwitch, direction, switchCount = 0;
      table = document.getElementsById("phones");
      switching = true;
      direction = "asc" // ascending directionection to sort

      while(switching){ // loops until no switching can be done
        switching = false;
        rows = table.rows;

        for(var i=1; i<(rows.length - 2); i++){ // loops through rows from the 2nd
          shouldSwitch = false; // there should be no switching
          el1 = rows[i].getElementsByTagName("TD")[n]; // element 1
          el2 = rows[i+1].getElementsByTagName("TD")[n]; // element 2

          if(direction=="asc"){ // Checks if two rows should switch position
            if(el1.innerHTML.toLowerCase()>el2.innerHTML.toLowerCase()){ // If el1 is bigger than el2
                shouldSwitch = true;
                break;
            }
          }else if(direction="desc"){
            if(el1.innerHTML.toLowerCase()<el2.innerHTML.toLowerCase()){ // If el2 is bigger than el1
                shouldSwitch = true;
                break;
            }
          }
        }

        if(shouldSwitch){ // If it is true, make the switch and say it has been done
          rows[i].parentNode.insertBefore(rows[i+1],rows[i]);
          switching = true;
          switchCount++; // each time a switch is done, increment
        }else{
          if(switchCount==0 && direction=="asc"){ // If no switching has been done and the directionection is asc
            direction = "desc";
            switching = true;
          }
        }
      }
    }

    function thisFormReset() {
      $.ajax({
        url:"https://wt.ops.labs.vu.nl/api22/779519fb/reset", method: "GET"
      });
    }

    //Task 4 - Single page form submit
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> <!--- include the jQuery library -->

    <div class="header">
      <h1>
      <a href="index.html">
          <img src="https://media.discordapp.net/attachments/887340040496238652/931255515923771392/logo.png" alt="Logo" width="60" height="80">
        </a>
      <pre>MobTech</pre>
      </h1>
      <h2>Welcome to our Web Shop!</h2>
    </div>

<!--- Navigation Bar -->
    <ul class="nav-bar">
      <li><a class="active" href="#home">Home</a></li>
      <li><a href="#top5">Top 5 Phones</a></li>
      <li><a href="#newest">Newest Phones</a></li>
      <li><a href="#top_month">Top of the Month</a></li>
      <li><a href="#bought_with">Accessories</a></li>
      <li><a href="#footer">Our Purposes</a></li>
      <li><a href="#footer">Brands Offered</a></li>
    </ul>

    <!--- Top 5 Phones -->
  <section class="top5" id="top5">
    <br><p>Check out our top 5 mobile phones!</p>
    <div id="data-form">
      <form action="" onsubmit="return FUNCTION()"id="my-form" method="post">
    </div>
    <script>
       //Task 4
       $("form").on("submit", function (e) {
          var dataString = $(this).serialize();

          $.ajax({ // process values in dataString
            type: "POST",
            url: "https://wt.ops.labs.vu.nl/api22/779519fb",
            data: dataString,
            success: function () {
              $('#data-form').html("<div id='message'></div>"); // display message back to user
                $('#message').html("<h2>Form Submitted!</h2>")
                .append("<p>Phone is being added to server</p>")
                .hide()
              }
            });

            e.preventDefault();
      });
       // Task 3
       fetch('https://wt.ops.labs.vu.nl/api22/779519fb') // GET request on URL
          .then(function (response) {
              return response.json(); // return array containing all phone items
          }).then(function (apiJsonData) {
              console.log(apiJsonData); // write to console
              renderDataIntoTable(apiJsonData);
          })

          function renderDataIntoTable(phones){ // finds table in DOM to append new rows to
            const mytable = document.getElementById("phones"); // finds table
            let mybody = document.createElement("tbody"); // creates tbody
             phones.forEach(phone =>{
               let newRow = document.createElement("tr"); // for each item, create new tr element
               Object.values(phone).forEach((value) =>{
                 let cell = document.createElement("td"); // adds each value as a td element
                 cell.classList.add("have-border"); // adds class for css functionality
                 if(isValidURL(value)){
                   value = "<img src= \"" + value + "\" width=\"154\" height=\"192\"></a>";
                   cell.innerHTML = value; // places image
                 }else{
                   cell.innerText = value; // places text
                 }
                 newRow.appendChild(cell);
               })
               mytable.appendChild(newRow);
             });
         }

         function isValidURL(str){ // validate URL
           const pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
            '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
            '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
            '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
            return !!pattern.test(str);
         }
       </script>
       <div id="data-table">
         <table id="phones" class="table">
          <thead>
           <tr>
             <th onclick="sortTable(1)">ID</th>
             <th onclick="sortTable(2)">Brand</th>
             <th onclick="sortTable(3)">Model</th>
             <th onclick="sortTable(4)">OS</th>
             <th class="no-sort">Image</th>
             <th onclick="sortTable(5)">Screensize</th>
           </tr>
         </thead>
         <tfoot>
           <tr>
             <td><pre>For Employees ONLY!        <em>Add new phone to server:</em></pre></td>
           </tr>
           <!--- Form to be filled in -->
           <tr>
             <td>
               <input type="url" name="image" id="image" placeholder="Paste Image Link Here" required>
             </td>
             <td>
               <input type="text" name="model" id="model" placeholder="Ex:IPhone 11" required>
             </td>
             <td>
               <input type="text" name="brand" id="brand" placeholder="Ex: Apple" required>
             </td>
             <td>
               <select name="os" id="os" placeholder="OS" required>
                 <option value="" hidden>Pick an <abbr title="Operating System">OS</abbr></option>
                 <option value="ios">IOS</option>
                 <option value="windows">Windows</option>
                 <option value="android">Android</option>
               </select>
             </td>
             <td>
               <input type="number" name="screensize" id="screensize" placeholder="6" max="100" min="3" step="1" required>
             </td>
             <td>
               <input type="submit" value="Submit" id="submitButton">
             </td>
             <td>
               <input type="button" name="reset" value="Reset" id="resetButton" onclick="thisFormReset()">
               <!---activates link: https://wt.ops.labs.vu.nl/api22/779519fb/reset-->
             </td>
           </tr>
          </tfoot>
         </table>
       </div>
      <br>
      <br>
    </section>
<!--- Newest Phones to the Market -->
      <section class="newest" id="newest">
        <br>
        <table>
         <caption><strong>Newest Arrivals!<strong></caption>
         <tr>
           <th>Xiaomi 11i 5G</th>
           <th>Oppo A36</th>
           <th>Samsung Galaxy AO3</th>
           <th>Huawei Enjoy 20e</th>
         </tr>
         <tr>
           <nav>
             <td><img src="https://i.gadgets360cdn.com/products/small/xiaomi-11i-5g-240x180-1641453772.jpg" alt="Xiaomi 11i 5G"></td>
             <td><img src="https://i.gadgets360cdn.com/products/small/oppo-a36-DB-240x180-1641814763.jpg" alt="Oppo A36"></td>
             <td><img src="https://i.gadgets360cdn.com/products/small/samsung-galaxy-a03-240x180-1641216629.jpg" alt="Samsung Galaxy AO3"></td>
             <td><img src="https://i.gadgets360cdn.com/products/large/huawei-enjoy-20e-2022-378x800-1641533728.jpg?downsize=*:180" alt="Huawei Enjoy 20e"></td>
           </nav>
         </tr>
         <tr>
           <td>Xiaomi</td>
           <td>OPPO</td>
           <td>Samsung</td>
           <td>Huawei</td>
         </tr>
         <tr>
           <td>Android</td>
           <td>Android</td>
           <td>Android</td>
           <td>HarmonyOS</td>
         </tr>
         <tr>
           <td>6.7"</td>
           <td>6.6"</td>
           <td>6.5"</td>
           <td>6.3"</td>
         </tr>
         <tr>
           <td>Now Available!</td>
           <td>Now Available!</td>
           <td>Coming in January!</td>
           <td>Coming in January!</td>
         </tr>
       </table>
       <br>
       <iframe width="400" height="206" src="https://www.youtube.com/embed/JjxAP4fetvY" name= "youtube-video" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
       <br>
       <caption>What to expect when you buy the Samsung Galaxy AO3!</caption>
     </section>
       <br>

<!--- Top Phone of the Month -->
     <section class="top_month" id="top_month">
       <h2>Top Phone of the Month!</h2>
       <p><strong>Apple: Iphone 13 Pro Max</strong></p>
       <img src="https://i.gadgets360cdn.com/products/large/iphone-13-pro-max-400x800-1631648541.jpg?downsize=*:180" alt="Iphone 13 Pro Max" class="top">
       <ul class="top-list">
         <li>one of the best camera resolutions up to date</li>
         <li>new light sensors</li>
         <li>up to 15x digital zoom</li>
         <li>new processor A15 Bionic</li>
         <li>longer battery life than before</li>
         <li>Adaptive refresh up to 120Hz</li>
       </ul>
       <br>
       <br>
     </section>

<!--- Accessories typically bought with [phone] -->
    <section class="bought_with" id="bought_with">
      <h2>Typically Bought with...</h2>
      <dl>
        <dt><strong><u>Samsung Galaxy S21 Ultra</u></strong></dt>
        <dd><a href="https://www.amazon.de/-/en/Samsung-EJ-PG998-Galaxy-Ultra-Black/dp/B08PPTGF2H/ref=sr_1_3?crid=LI433JQ8T3XF&keywords=Samsung+S+Pen+EJ-PG998&qid=1642086711&sprefix=samsung+s+pen+ej-pg998%2Caps%2C105&sr=8-3">Samsung S Pen EJ-PG998</a></dd>
        <dd><a href="https://www.amazon.de/-/en/Samsung-Fast-Charger-Without-Cable/dp/B08P95B5FR/ref=sr_1_3?crid=24OTK4OB4FOH&keywords=samsung+25w+schnellladeger%C3%A4t+-+usb+typ+c&qid=1642087017&sprefix=samsung+25w+fast+charger+-+usb+type+c%2Caps%2C116&sr=8-3">Samsung 25W Fast Charger - USB Type C </a></dd>
        <dd><a href="https://www.amazon.de/Tempered-Protector-Fingerprint-Compatible-Coverage/dp/B09NXQ5Q5Y/ref=sr_1_1_sspa?crid=1R7F5HLNXF9BJ&keywords=tauri+displayschutzfolie+samsung+galaxy+s21+ultra&qid=1642086962&sprefix=tauri+screen+protector+samsung+galaxy+s21+ultra%2Caps%2C135&sr=8-1-spons&psc=1&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExOUpNTUhINkNBUFcyJmVuY3J5cHRlZElkPUEwNTE1MDg4MVlINjBBWUZMM1dVMiZlbmNyeXB0ZWRBZElkPUEwNzE2MDg3MVVUREZQRTZDMVpVVSZ3aWRnZXROYW1lPXNwX2F0ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=">Tauri Screen Protector</a></dd>
        <br>
        <dt><strong><u>iPhone 13 Pro</u></strong></dt>
        <dd><a href="https://www.amazon.de/Apple-AirPods-MagSafe-charging-case/dp/B09JQZ5DYM/ref=sr_1_1_sspa?crid=1R5ELRE6HFBSV&keywords=Apple+AirPods+Pro&qid=1642087048&sprefix=apple+airpods+pro%2Caps%2C136&sr=8-1-spons&psc=1&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExOTYwNThZRDI2MDZUJmVuY3J5cHRlZElkPUEwMDkxODI4MjZHM0s2TVZHMTZVUiZlbmNyeXB0ZWRBZElkPUEwODk2NjMwN1VWUzg0QjFYNlhPJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==">Apple AirPods Pro</a><dd>
        <dd><a href="https://www.amazon.de/-/en/MHXH3ZM-A-Apple-MagSafe-Charger/dp/B08L5R6ZHP/ref=sr_1_3?crid=37FBIBSFWXI1K&keywords=magsafe-ladeger%C3%A4t&qid=1642087089&sprefix=magsafe+charger%2Caps%2C317&sr=8-3">MagSafe Charger</a></dd>
        <dd><a href="https://www.amazon.de/-/en/MM2A3ZM-A/dp/B09G8WV2F2/ref=sr_1_3?crid=2R6CQVR3D8GMQ&keywords=apple+silikon+h%C3%BClle+mit+magsafe&qid=1642087108&sprefix=apple+silicone+case+with+magsafe%2Caps%2C100&sr=8-3">Apple Silicon Case with MagSafe</a><dd>
      </dl>
      <br>
      <br>
    </section>

    <section class="footer" id="footer">
      <div class="column purposes">
        <br>
        <!--- Purposes of our Company -->
        <h2>Our Purpose</h2>
        <ol type="1">
          <li>To be a customer-centric company</li>
          <li>To provide the best mobile devices in the market</li>
          <li>To give the people the power of doing anything from their fingertips</li>
          <li>To organise valuable information on mobile devices to be understood by all <i>even if you're not a tech person</i></li>
        </ol>
      </div>

      <div class="column brands">
        <br>
        <!--- Brands Offered by Our Company -->
        <h2>Brands we Offer!</h2>
        <figure>
          <p class="aligncentre"><img src="https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fwww.budgetmobilephones.com.au%2Fwp-content%2Fuploads%2F2010%2F10%2Fapple-nokia-lg-motorola-samsung-sony-logos.jpg&f=1&nofb=1" alt="Brands" width="10%"></p>
          <figcaption>Starting from the left: Apple, Nokia, Motorola, LG, Samsung, Sony Ericsson</figcation>
        </figure>
      </div>
    </section>
  </body>
</html>
<!-- Short Browser Compatibility Report -->
<!-- 1. Print Style Testing on Different Browsers
    First we discussed which browsers we use and concluded we would test our code on:
    - Safari
    - Edge
    - Chrome
    - Opera
    - Firefox
    We decided to use those 5 as we think they are the most common used ones.

    In our testing we concluded that our design is compatible with each browser.
    We used the "page-break-after" and "page-break-before" commands to try and enssure a similar display on all Browsers.

    Chrome and Firefox have the same printing display. Our website is printed in 4 pages, leaving a space between out two tables.
    Opera and Edge have the same display as well. These two Browsers also print the site in 4 pages, but they display the table slightly bigger than the previous browsers. The use of "page-break-after" is really useful with these browsers as the design falls apart without it.
    Finally Safari prints the webstite in 5 pages. This browser also makes the table slightly bigger as the previous two browsers, but it also includes a white page separating the contents of the page and the footer. This is the only browser to do so.

    The design follows consistent across the 5 browsers with slight changes.
-->
<!-- 2. Test on Different Screen Sizes
    To test our Website compatibility with different devices we used the chrome DevTool.
    The Chrome desktop browser's DevTools provides a screen emulator that can mimic a wide range of smartphones and tablets. We access the DevTools screen emulator by typing Ctrl-Shift-I in Chrome (Windows) or Command-Option-I (Mac).
    We were able to view our page in different sizes and we were able to adjust our design accordingly.
-->
<!-- 3. HTML5 and CSS Constructs in Different Browsers (worked/didn't)
    First, we checked which constructs are accepted by what browser and their version.
    We decided to use the same 5 browsers we did for the print check.
    To ensure accurate support, we made use of the latest versions of the browsers.
    We discovered that constructs such as 'font-size-override'  is not shown in the browsers we made use of, except for firefox.
    Additionally, edge was found to not support a few constructs which other browsers did such as "text-emphasis", "text-combine-upright", and "font-variant-numeric".
    Overall, we found that the 5 browsers supported a majority of constructs, with more specific constructs such as "mask-mode", "text-underline-position" and "font-variant-position" being supported by only one or two browsers.
    Thus, we made sure in our code that both html and css constructs we made use of could be visible in all 5 major browsers.
-->
